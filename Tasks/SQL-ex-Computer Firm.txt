xcopy /Q /Y "$(Targetpath)" "$(SolutionDir)\GameRunner\bin\Debug"


CREATE DATABASE [Computer firm]
GO
CREATE TABLE Product
(maker VARCHAR(10) NOT NULL,
model VARCHAR(50) PRIMARY KEY,
type VARCHAR(50) NOT NULL)
GO
CREATE TABLE pc
(code INTEGER PRIMARY KEY,
model VARCHAR(50) NOT NULL,
speed SMALLINT NOT NULL,
ram SMALLINT NOT NULL,
hd REAL NOT NULL,
cd VARCHAR(10) NOT NULL,
price MONEY,
FOREIGN KEY (model) REFERENCES Product(model))
GO
CREATE TABLE laptop
(code INTEGER PRIMARY KEY,
model VARCHAR(50) NOT NULL,
speed SMALLINT NOT NULL,
ram SMALLINT NOT NULL,
hd REAL NOT NULL,
price MONEY,
screen TINYINT NOT NULL,
FOREIGN KEY (model) REFERENCES Product(model))
GO
CREATE printer
(code INTEGER PRIMARY KEY,
model VARCHAR(50) NOT NULL,
color char(1) NOT NULL,
type varchar(10) NOT NULL,
price MONEY,
FOREIGN KEY (model) REFERENCES Product(model))


--Computer firm DB
1)
SELECT model, speed, hd 
FROM pc
WHERE price < 500

--
from p in PCs
where p.Price < 500
select new {p.Model, p.Speed, p.Hd}

--
PCs
.Where(p => (p.Price < 500))
.Select(p => new
{
	Model = p.Model,
	Speed = p.Speed,
	Hd = p.Hd
})

2) 
SELECT DISTINCT Maker
FROM Product
WHERE type = 'Printer'

--
(from p in Products
where p.Type == "Printer"
select new {p.Maker}).Distinct()

--
Products
.Where(p => p.Type == "Printer")
.Select(p => new
{
	Maker = p.Maker
}).Distinct()


3)
SELECT model, ram, screen
FROM laptop
WHERE price > 1000

--
from l in Laptops
where l.Price > 1000
select new 
{
	Model = l.Model,
	Ram = l.Ram,
	Screen = l.Screen
}

--
Laptops
.Where(l => l.Price > 1000)
.Select(l => new
{
	Model = l.Model,
	Ram = l.Ram,
	Screen = l.Screen
})


4)
SELECT *
FROM Printer
WHERE color = 'Y'

--

from p in Printers
where p.Color == 'y'
select p


5)
SELECT model, speed, hd
FROM Pc
WHERE cd in ('12x', '24x') AND price < 600

--
from pc in PCs
where new[] {"12x", "24x"}.Contains(pc.Cd) 
&& pc.Price < 600
select new
{
	Model = pc.Model,
	Speed = pc.Speed,
	Hd = pc.Hd
}

6)
SELECT DISTINCT Product.maker, Laptop.speed
FROM Product INNER JOIN Laptop on product.model = laptop.model
WHERE Laptop.hd >= 10

--
(from p in Products
join l in Laptops on p.Model equals l.Model
where l.Hd >= 10
select new 
{
	Maker = p.Maker,
	Speed = l.Speed
}).Distinct()


7)
SELECT PC.model, price
FROM PC INNER JOIN   
     Product ON PC.model = Product.model
where product.maker='b'
UNION
SELECT Laptop.model, price 
FROM Laptop INNER JOIN   
     Product ON Laptop.model = Product.model
where product.maker='b'
UNION
SELECT Printer.model, price 
FROM Printer INNER JOIN   
     Product ON Printer.model = Product.model
where product.maker='b'

--
(from pc in PCs
join p in Products 
on pc.Model equals p.Model
where p.Maker == "b"
select new 
{
	Model = pc.Model,
	Price = pc.Price
}).Union
(from l in Laptops 
join p in Products 
on l.Model equals p.Model
where p.Maker == "b"
select new
{
	Model = l.Model,
	Price = l.Price
}).Union
(from pr in Printers
join p in Products
on pr.Model equals p.Model
where p.Maker == "b"
select new
{
	Model = pr.Model,
	Price = pr.Price
})


8)
select maker
from product
where type = 'pc'
except
select maker
from product
where type='laptop'

--
(from prod in Products
where prod.Type == "pc"
select new 
{
	Maker = prod.Maker
}).Except
(from prod in Products
where prod.Type == "laptop"
select new 
{
	Maker = prod.Maker
})

9)
Select distinct maker
from product
where type = 'pc'
 and model in
(select model
from pc
where speed >= '450')


--
(from p in Products
let squery = from pc in PCs
where pc.Speed >= 450
select pc.Model
where p.Type == "pc"
&& squery.Contains(p.Model)
select new 
{
	Maker = p.Maker
}).Distinct()


10)
Select model, price
from printer
where price in 
(select max(price)
from printer)


--
(from pr in Printers
let squery = (from printer in Printers
select printer.Price).Max()
where pr.Price == squery
select new
{
	Model = pr.Model,
	Price = pr.Price
})


11)
Select AVG(speed)
from pc

--
PCs.Average(p=>p.Speed)

12) 
Select avg(speed)
from laptop
where price > 1000

--
Laptops.Where(l => l.Price > 1000).Average(l => l.Speed)

13)
Select avg(speed)
from pc
where model in (
select model 
from product
where maker = 'a')

--
PCs.Where(model => Products.Where(prod => prod.Maker == "a")
.Select(prod => prod.Model)
.Contains(model.Model))
.Select(pc => (int)pc.Speed)
.Average()

14) !!!
Select  maker, type
from product
group by type, maker
having count(model) > 1 and 


15) 
Select hd
from pc
group by hd
having count(hd) >1


--
from pc in PCs
group pc by pc.Hd into pcs
where pcs.Count() > 1
select pcs.Key


16)
select distinct p1.model, p2.model, p1.speed, p1.ram
from PC as p1, PC as p2
where p1.model <> p2.model 
and p1.speed = p2.speed
and p1.ram = p2.ram
and p1.model > p2.model



17) !!!
select type, product.model, speed
from product inner join laptop on (product.model = laptop.model)
where speed < all(select speed from pc)

 
18) !!!
Select distinct maker, price
from product inner join printer
on product.model = printer.model
where price in (select Min(price)
from Printer
where color = 'y')
and color = 'y'

--



19) 
select maker, avg(screen)
from product inner join laptop 
on (product.model = laptop.model)
group by maker


--
from pr in Products 
join l in Laptops
on pr.Model equals l.Model
group pr by pr.Maker 
into prs
select new
{
	Maker = prs.Key,
	ScreenAvg = Laptops.Select(lap =>(int)lap.Screen).Average()
}


20)
select maker, count(type)
from product 
where type='PC'
group by maker
having count(type) > 2



21)
SELECT maker, MAX(price) as 'Maximum price'
FROM Product, PC
Where Product.model = PC.model
GROUP BY maker

22)
SELECT speed, AVG(price)
FROM PC
WHERE speed > 600
GROUP BY speed

23)
SELECT Distinct maker
From (Product inner join PC on Product.model = PC.model)
Where PC.speed >=750
intersect 
(SELECT Distinct maker
From (Product inner join laptop on Product.model = laptop.model)
Where laptop.speed >=750)


24)
select model
from 
(select model, price
from pc
union all
select model, price
from laptop
union all
select model, price
from printer) x
where price = (select  max(price)
from 
(select price
from pc
union all
select price
from laptop
union all
select price
from printer) x)
group by model


25)
select maker
from (product inner join PC 
on product.model = PC.model)

where speed =
(select max(speed)
from PC
where ram =
(select min(ram)
from PC
))  and ram =
(select min(ram)
from PC)

intersect
select maker
from product
where type = 'printer'


26)
Select avg(price)
from 
(select price
from pc inner join product
on pc.Model = product.Model
where product.Maker = 'A'
union all
select price
from laptop inner join product
on laptop .Model = product.Model
where product.Maker = 'A') x


27)
Select distinct maker, avg(hd)
from product inner join pc
on product.model = pc.model
where maker in 
(select distinct maker
from product 
where type ='printer')
group by maker



28)
select count(distinct maker)
from product
-- Нужно дописать where условие, но какое?
group by maker
having count(distinct model) = 1


29)




35)
Select distinct model, type
from product
where model like '%[0-9]%'
and ISNUMERIC(model) = 1
OR model like '%[A-Z]%'
and model NOT LIKE '%[0-9]%'



47)
Select Count(*) no, p1.maker, p1.model
from product p1 join
 product p2 on p1.model <= p2.model
group by p1.model, p1.maker
order by p1.model asc, p1.maker desc





